@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import Google Fonts for all themes */
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

@layer base {
  :root {
    --mana-white: #F8E7B9;
    --mana-blue: #0E68AB;
    --mana-black: #150B00;
    --mana-red: #D3202A;
    --mana-green: #00733E;
    --arcane-gold: #D4A843;
    --arcane-purple: #8B5CF6;

    /* Dark Magitech palette (default / MTG) */
    --void: #0B0C15;
    --void-light: #12131F;
    --void-lighter: #1A1B2E;
    --obsidian: rgba(255, 255, 255, 0.05);
    --obsidian-hover: rgba(255, 255, 255, 0.08);
    --obsidian-border: rgba(255, 255, 255, 0.1);
    --luminescent: #D4A843;
    --silver: #E8E6E3;
    --silver-muted: rgba(232, 230, 227, 0.7);
    --silver-faint: rgba(232, 230, 227, 0.4);

    /* Legacy scroll tokens */
    --scroll-bg: #F5E6D3;
    --scroll-border: #8B7355;
    --scroll-text: #2C1810;

    /* Font families (overridden per theme) */
    --font-heading: 'Cinzel', serif;
    --font-body: Georgia, Cambria, serif;
  }

  /* ==========================================
     Simple Theme (light, clean, Notion-like)
     ========================================== */
  [data-theme="simple"] {
    --void: #FFFFFF;
    --void-light: #F9FAFB;
    --void-lighter: #F3F4F6;
    --obsidian: rgba(0, 0, 0, 0.03);
    --obsidian-hover: rgba(0, 0, 0, 0.05);
    --obsidian-border: rgba(0, 0, 0, 0.1);
    --luminescent: #2563EB;
    --silver: #1F2937;
    --silver-muted: rgba(31, 41, 55, 0.7);
    --silver-faint: rgba(31, 41, 55, 0.4);
    --arcane-purple: #2563EB;
    --arcane-gold: #2563EB;
    --font-heading: 'Inter', sans-serif;
    --font-body: 'Inter', sans-serif;
  }

  /* ==========================================
     Detailed Theme (VS Code dark)
     ========================================== */
  [data-theme="detailed"] {
    --void: #1E1E1E;
    --void-light: #252526;
    --void-lighter: #2D2D2D;
    --obsidian: rgba(255, 255, 255, 0.04);
    --obsidian-hover: rgba(255, 255, 255, 0.07);
    --obsidian-border: rgba(255, 255, 255, 0.1);
    --luminescent: #569CD6;
    --silver: #D4D4D4;
    --silver-muted: rgba(212, 212, 212, 0.7);
    --silver-faint: rgba(212, 212, 212, 0.4);
    --arcane-purple: #569CD6;
    --arcane-gold: #DCDCAA;
    --font-heading: 'Inter', sans-serif;
    --font-body: 'Inter', sans-serif;
  }

  body {
    background-color: var(--void);
    color: var(--silver);
    font-family: var(--font-body);
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
  }
}

@layer components {
  /* Glass card - primary container style */
  .glass-card {
    background: var(--obsidian);
    border: 1px solid var(--obsidian-border);
    border-radius: 0.75rem;
    backdrop-filter: blur(12px);
  }

  .glass-card:hover {
    background: var(--obsidian-hover);
  }

  /* Simple theme override: solid white cards */
  [data-theme="simple"] .glass-card {
    background: #FFFFFF;
    border: 1px solid #E5E7EB;
    backdrop-filter: none;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }

  [data-theme="simple"] .glass-card:hover {
    background: #FFFFFF;
    border-color: #D1D5DB;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
  }

  /* Glass border utility */
  .glass-border {
    border: 1px solid var(--obsidian-border);
  }

  /* Scroll/Parchment styled containers (legacy - now dark themed) */
  .scroll-container {
    background: var(--obsidian);
    border: 1px solid var(--obsidian-border);
    border-radius: 0.75rem;
    backdrop-filter: blur(12px);
  }

  [data-theme="simple"] .scroll-container {
    background: #FFFFFF;
    border: 1px solid #E5E7EB;
    backdrop-filter: none;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }

  /* Code block styling */
  .code-scroll {
    @apply p-4 font-mono text-sm overflow-x-auto;
    background-color: rgba(0, 0, 0, 0.3);
  }

  [data-theme="simple"] .code-scroll {
    background-color: #F3F4F6;
    color: #1F2937;
  }

  /* Mana/Progress bar */
  .mana-bar {
    @apply h-3 rounded-full overflow-hidden;
    background: var(--obsidian);
  }

  .mana-fill {
    @apply h-full rounded-full transition-all duration-500;
    background: linear-gradient(to right, var(--mana-blue), var(--arcane-purple));
    box-shadow: 0 0 10px var(--mana-blue);
  }

  [data-theme="simple"] .mana-fill {
    background: linear-gradient(to right, #2563EB, #3B82F6);
    box-shadow: none;
  }

  /* Button styles */
  .btn-arcane {
    @apply px-6 py-2 rounded-lg font-semibold transition-all duration-200;
    background: linear-gradient(135deg, var(--arcane-gold), #B8942F);
    color: var(--void);
    font-family: var(--font-heading);
  }

  .btn-arcane:hover {
    box-shadow: 0 0 20px rgba(212, 168, 67, 0.4);
    transform: translateY(-1px);
  }

  [data-theme="simple"] .btn-arcane {
    background: #2563EB;
    color: #FFFFFF;
    font-family: 'Inter', sans-serif;
  }

  [data-theme="simple"] .btn-arcane:hover {
    background: #1D4ED8;
    box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
  }

  [data-theme="detailed"] .btn-arcane {
    background: #569CD6;
    color: #1E1E1E;
    font-family: 'Inter', sans-serif;
  }

  [data-theme="detailed"] .btn-arcane:hover {
    background: #6CB0E0;
    box-shadow: 0 2px 8px rgba(86, 156, 214, 0.3);
  }

  .btn-mana {
    @apply px-6 py-2 rounded-lg font-semibold transition-all duration-200;
    @apply bg-mana-blue text-white hover:bg-opacity-90;
  }

  .btn-mana:hover {
    box-shadow: 0 0 15px rgba(14, 104, 171, 0.3);
  }

  [data-theme="simple"] .btn-mana {
    @apply bg-gray-100 text-gray-700 hover:bg-gray-200;
    box-shadow: none;
  }

  [data-theme="simple"] .btn-mana:hover {
    box-shadow: none;
  }

  /* Alert/Error styles (Counterspell theme) */
  .counterspell-alert {
    @apply border-l-4 border-mana-red p-4 rounded-r-lg;
    background: rgba(211, 32, 42, 0.1);
  }

  [data-theme="simple"] .counterspell-alert {
    background: #FEF2F2;
    border-color: #EF4444;
  }

  /* Success styles */
  .resolve-alert {
    @apply border-l-4 border-mana-green p-4 rounded-r-lg;
    background: rgba(0, 115, 62, 0.1);
  }

  [data-theme="simple"] .resolve-alert {
    background: #F0FDF4;
    border-color: #22C55E;
  }
}

/* Syntax highlighting for code blocks */
.code-scroll code {
  color: var(--silver);
}

.code-scroll .keyword {
  @apply font-semibold;
  color: var(--mana-blue);
}

.code-scroll .string {
  color: var(--mana-green);
}

.code-scroll .comment {
  @apply italic;
  color: var(--silver-faint);
}

.code-scroll .decorator {
  color: var(--arcane-purple);
}

/* Prose styling for dark theme markdown */
.prose-dark h1, .prose-dark h2, .prose-dark h3, .prose-dark h4 {
  color: var(--silver);
}

.prose-dark p {
  color: var(--silver-muted);
}

.prose-dark a {
  color: var(--arcane-purple);
}

.prose-dark a:hover {
  @apply underline;
}

.prose-dark strong {
  color: var(--silver);
}

.prose-dark code {
  color: var(--arcane-purple);
  background: rgba(139, 92, 246, 0.1);
  @apply px-1.5 py-0.5 rounded text-sm font-mono;
}

[data-theme="simple"] .prose-dark code {
  color: #2563EB;
  background: #EFF6FF;
}

.prose-dark pre {
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--obsidian-border);
  @apply rounded-lg p-4 my-4 overflow-x-auto;
}

[data-theme="simple"] .prose-dark pre {
  background: #F3F4F6;
  border-color: #E5E7EB;
}

.prose-dark pre code {
  background: transparent;
  @apply p-0;
}

.prose-dark ul, .prose-dark ol {
  color: var(--silver-muted);
}

.prose-dark li::marker {
  color: var(--arcane-purple);
}

.prose-dark hr {
  border-color: var(--obsidian-border);
}

.prose-dark table {
  @apply w-full;
}

.prose-dark th {
  background: var(--obsidian);
  border: 1px solid var(--obsidian-border);
  @apply px-4 py-2 font-semibold text-left;
  color: var(--silver);
}

.prose-dark td {
  border: 1px solid var(--obsidian-border);
  @apply px-4 py-2;
  color: var(--silver-muted);
}

/* Focus-visible styles for keyboard navigation */
*:focus-visible {
  outline: 2px solid var(--arcane-purple);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .animate-pulse {
    animation: none !important;
  }
}

/* Animated nebula gradient for auth pages */
.nebula-bg {
  background: radial-gradient(ellipse at 20% 50%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 20%, rgba(14, 104, 171, 0.1) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 80%, rgba(212, 168, 67, 0.08) 0%, transparent 50%);
  animation: nebula-shift 20s ease-in-out infinite;
}

/* Simple theme: flat light bg, no animation */
[data-theme="simple"] .nebula-bg {
  background: #F9FAFB;
  animation: none;
}

/* Detailed theme: static dark bg, no fantasy animation */
[data-theme="detailed"] .nebula-bg {
  background: #1E1E1E;
  animation: none;
}

@keyframes nebula-shift {
  0%, 100% {
    background-position: 0% 0%, 100% 0%, 50% 100%;
  }
  33% {
    background-position: 100% 50%, 0% 100%, 80% 20%;
  }
  66% {
    background-position: 50% 100%, 80% 50%, 20% 60%;
  }
}
